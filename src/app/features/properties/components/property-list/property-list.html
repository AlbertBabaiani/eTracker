<!-- Header Section -->
<section class="header-row">
  <div class="title-group">
    <h1 class="page-title">Your Properties</h1>
    <span class="count-badge">{{ properties().length }} units</span>
  </div>

  <a mat-flat-button color="primary" routerLink="/feature/properties/add" class="add-btn">
    <mat-icon>add</mat-icon>
    Add Property
  </a>
</section>

<section class="property-grid">
  <!-- Property Cards -->
  @for(property of properties(); track property.id) {
  <mat-card class="property-card" appearance="outlined">
    <div class="image-container" [routerLink]="['/feature/properties', property.id]">
      <img
        src="https://material.angular.dev/assets/img/examples/shiba2.jpg"
        alt="{{ property.name }}"
      />
    </div>

    <!-- Card Body -->
    <mat-card-header class="card-header" [routerLink]="['/feature/properties', property.id]">
      <mat-card-title class="card-title">
        {{ property.name | titlecase | truncate : 30 }}
      </mat-card-title>
      <mat-card-subtitle class="card-subtitle">
        <mat-icon class="tiny-icon">location_on</mat-icon>
        <span>{{ property.location | titlecase | truncate : 30 }}</span>
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <div class="features-row">
        <div class="feature-item" title="Rooms">
          <mat-icon>meeting_room</mat-icon>
          <span>{{ property.rooms }}</span>
        </div>
        <div class="feature-item" title="Max Guests">
          <mat-icon>group</mat-icon>
          <span>{{ property.maxGuests }}</span>
        </div>
        <div class="feature-item" title="Floor">
          <mat-icon>layers</mat-icon>
          <span>{{ property.floor }}</span>
        </div>
        @if(property.alias) {
        <div class="feature-item alias-badge" title="Alias">
          <span>{{ property.alias | truncate : 10 }}</span>
        </div>
        }
      </div>
    </mat-card-content>

    <mat-divider></mat-divider>

    <!-- Actions Footer -->
    <mat-card-actions class="card-actions">
      <button
        class="details-btn"
        mat-button
        color="primary"
        [routerLink]="['/feature/properties', property.id]"
      >
        Details
      </button>

      <div class="right-actions">
        <button
          mat-icon-button
          [routerLink]="['/feature/properties', property.id, 'edit']"
          matTooltip="Edit"
        >
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button matTooltip="Share">
          <mat-icon>share</mat-icon>
        </button>
      </div>
    </mat-card-actions>
  </mat-card>
  }

  <!-- Empty State / Add New Card -->
  <mat-card
    class="property-card add-new-card"
    appearance="outlined"
    routerLink="/feature/properties/add"
    mat-ripple
  >
    <div class="add-content">
      <div class="icon-circle">
        <mat-icon>add</mat-icon>
      </div>
      <h3>Add New Property</h3>
      <p>List a new apartment for rent</p>
    </div>
  </mat-card>
</section>
